{"project":"joyent/sdc-cloudapi","branch":"master","id":"Id3a50d9a138efb94fa219df4c1085b57b461df61","number":"3639","subject":"PUBAPI-1476 Create a compatibility layer so that all cloudapi plugins can be used in sdc-docker, and vice versa DOCKER-1054 Provide provisioning limits plugin for sdc-docker similar to cloudapi functionality Reviewed by: Pedro P. Candel \u003cpedro@joyent.com\u003e","owner":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"url":"https://cr.joyent.us/3639","commitMessage":"PUBAPI-1476 Create a compatibility layer so that all cloudapi plugins can be used in sdc-docker, and vice versa\nDOCKER-1054 Provide provisioning limits plugin for sdc-docker similar to cloudapi functionality\nReviewed by: Pedro P. Candel \u003cpedro@joyent.com\u003e\nReviewed by: Trent Mick \u003ctrentm@gmail.com\u003e\nApproved by: Pedro P. Candel \u003cpedro@joyent.com\u003e\nApproved by: Trent Mick \u003ctrentm@gmail.com\u003e\n","createdOn":1521076498,"lastUpdated":1521144146,"open":false,"status":"MERGED","comments":[{"timestamp":1521076498,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 1."},{"timestamp":1521076532,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 1: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1521078732,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 2."},{"timestamp":1521078765,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 2: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1521082437,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 2:\n\nIMO this isn\u0027t quite ready yet. Changes I\u0027d like to see:\n\n- the plugin manager plugin loading should more gracefully handle the old\n  API to give guidance\n- the cloudapi/docs/admin.md docs miss some fields. I think these ones:\n    ```\n        datacenterName: app.config.datacenter_name,\n        service: \u0027cloudapi\u0027,\n        NotAuthorizedError: require(\u0027restify\u0027).NotAuthorizedError,\n    ```\n- Marsell mentioned writing \"upgrade\" docs for plugin authors. Did that get\n  written?\n- package.json minor version bump please\n- update to the \"Versions\" section of docs/index.md (the best changelog we have... tho that is somewhat more for users more than for operators) to describe the plugin api breakage.\n\n\nThis could be in a separate change (though should be easy):\n\n- `opts` passed to plugin hooks should get the `log` entry and jpc-preprovision.js\n  should be updated to use that. It should pass in `req.log`. Without that\n  change the jpc-preprovision.js plugin\u0027s logging is hamstrung: the log records\n  won\u0027t be associated with the req (other than proximity in time in the log\n  file)"},{"timestamp":1521088932,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 3."},{"timestamp":1521088967,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 3: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1521089526,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3:\n\nWhen I asked around, I was told that JPC is the only place that we\u0027re aware of custom plugins (or any plugins really) being used. It strikes me that we\u0027re holding up a solution to a very real and immediate problem that ops has, for a problem that we have no evidence of existing, and we never made any stability guarantees about in the first place.\n\nI do not recall stating I was writing *code* upgrade docs, but I\u0027ll do so. This is all vaguely specious to me.\n\nThat said, a bit more time out of the release until this is all clarified is probably for the best."},{"timestamp":1521099742,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3:\n\n\u003e When I asked around, I was told that JPC is the only place that we\u0027re aware of custom plugins (or any plugins really) being used. \n\nOkay. Saying so on the ticket would help. Apologies if I missed that.\n\n\u003e It strikes me that we\u0027re holding up a solution to a very real and immediate problem that ops has, for a problem that we have no evidence of existing\n\nFine on not going an extra mile for bwcompat. However, I\u0027m asking for a change (I pointed out the place where to make it, it is a single line) to have a more clear error message for this case.\n\nI\u0027m pointing out that the change to jpc-preprovision results in logging of rejected requests changing to app.log from req.log, losing association with the request in the logs.\n\n\u003e I do not recall stating I was writing *code* upgrade docs, but I\u0027ll do so. This is all vaguely specious to me.\n\n\"I\u0027m also adding an upgrade section to the docs, which weren\u0027t there before. Good idea.\"  from private chat with you is what I was remembering."},{"timestamp":1521099818,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1"},{"timestamp":1521110874,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 3:\n\nI didn\u0027t mean for code, but since we\u0027re not putting this in this release, there\u0027s no reason not to spend a couple hours documenting it.\n\nI also need to apologize for my prior comment. I\u0027m a tad frustrated this didn\u0027t make it in to this release, but after thinking it for a bit, I strongly concur with your assessment: this is a high-risk change that needs to bake a bit more before it hits the release channel. I believe it should work, but belief is no substitute for kicking the tires."},{"timestamp":1521117198,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"Patch Set 3: Code-Review+1 Integration-Approval+1\n\n(1 comment)\n\nGood catch on the plugin-manager typo.\n\nRegarding making it to ops, we can do that despite of the release if we think it\u0027s urgent for us. We can either ask them to use tagging/dev images for this particular thing, or we can also publish a new image to the release channel. I think it\u0027s a good thing to try to do not be constrained by the release date when we\u0027re speaking about JPC."},{"timestamp":1521118946,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Uploaded patch set 4."},{"timestamp":1521118980,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 4: CI-Testing+1\n\n\"make check\" passed ok"},{"timestamp":1521119217,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 4:\n\nSo now, should I provide the aforementioned opts.log now or later? The changes are simple, but testing it will take time -- I figure about a day for everything.\n\nI think it\u0027s preferable to get this in now if we\u0027re doing it."},{"timestamp":1521133558,"reviewer":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},"message":"Patch Set 4: Code-Review+1 Integration-Approval+1\n\nMarsell,\nThanks for the added docs! Those are great."},{"timestamp":1521143929,"reviewer":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"message":"Patch Set 5: Patch Set 4 was rebased"},{"timestamp":1521143964,"reviewer":{"name":"Joyent Automation","username":"joyent-automation"},"message":"Patch Set 5:\n\n\"make check\" passed ok"},{"timestamp":1521144146,"reviewer":{"name":"Gerrit Code Review","email":"no-reply@cr.joyent.us"},"message":"Change has been successfully merged by Marsell Kukuljevic"}],"currentPatchSet":{"number":"5","revision":"03b2ec911bbac50889c03ff13f5b3c5b9eabc8d1","parents":["1c71d6f13543d56d6c184c09bb3730440be34031"],"ref":"refs/changes/39/3639/5","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1521143929,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1521118980,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521133558,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521133558,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1521144146,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"docs/admin.md","type":"MODIFIED","insertions":456,"deletions":-427},{"file":"docs/index.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":283,"deletions":-417},{"file":"lib/machines.js","type":"MODIFIED","insertions":25,"deletions":-6},{"file":"lib/middleware/networks.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"lib/nics.js","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"lib/plugin-manager.js","type":"ADDED","insertions":339,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"plugins/capi_limits.js","type":"DELETED","insertions":0,"deletions":-164},{"file":"plugins/filter_owner_networks.js","type":"MODIFIED","insertions":107,"deletions":-228},{"file":"plugins/free_tier.js","type":"ADDED","insertions":125,"deletions":0},{"file":"plugins/jpc_free_tier.js","type":"DELETED","insertions":0,"deletions":-162},{"file":"plugins/machine_email.js","type":"MODIFIED","insertions":126,"deletions":-88},{"file":"plugins/provision_limits.js","type":"MODIFIED","insertions":835,"deletions":-351},{"file":"test/machines.test.js","type":"MODIFIED","insertions":1,"deletions":-9},{"file":"test/plugins/filter-owner-networks.test.js","type":"ADDED","insertions":292,"deletions":0},{"file":"test/plugins/filter_owner_networks.test.js","type":"DELETED","insertions":0,"deletions":-424},{"file":"test/plugins/free-tier.test.js","type":"ADDED","insertions":276,"deletions":0},{"file":"test/plugins/machine-email.test.js","type":"ADDED","insertions":198,"deletions":0},{"file":"test/plugins/plugin-manager.test.js","type":"ADDED","insertions":991,"deletions":0},{"file":"test/plugins/provision-limits.test.js","type":"ADDED","insertions":1167,"deletions":0}],"sizeInsertions":5243,"sizeDeletions":-2282},"patchSets":[{"number":"1","revision":"107c0656952740435f3a868c824e4f63eb750289","parents":["c2c7bfe941df272297594930361bf1d1ce3ac18b"],"ref":"refs/changes/39/3639/1","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1521076498,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1521076532,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"docs/admin.md","type":"MODIFIED","insertions":332,"deletions":-406},{"file":"lib/app.js","type":"MODIFIED","insertions":283,"deletions":-417},{"file":"lib/machines.js","type":"MODIFIED","insertions":25,"deletions":-6},{"file":"lib/middleware/networks.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"lib/nics.js","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"lib/plugin-manager.js","type":"ADDED","insertions":352,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"plugins/capi_limits.js","type":"DELETED","insertions":0,"deletions":-164},{"file":"plugins/filter_owner_networks.js","type":"MODIFIED","insertions":107,"deletions":-228},{"file":"plugins/free_tier.js","type":"ADDED","insertions":125,"deletions":0},{"file":"plugins/jpc_free_tier.js","type":"DELETED","insertions":0,"deletions":-162},{"file":"plugins/machine_email.js","type":"MODIFIED","insertions":126,"deletions":-88},{"file":"plugins/provision_limits.js","type":"MODIFIED","insertions":835,"deletions":-351},{"file":"test/machines.test.js","type":"MODIFIED","insertions":1,"deletions":-9},{"file":"test/plugins/filter-owner-networks.test.js","type":"ADDED","insertions":292,"deletions":0},{"file":"test/plugins/filter_owner_networks.test.js","type":"DELETED","insertions":0,"deletions":-424},{"file":"test/plugins/free-tier.test.js","type":"ADDED","insertions":276,"deletions":0},{"file":"test/plugins/machine-email.test.js","type":"ADDED","insertions":198,"deletions":0},{"file":"test/plugins/plugin-manager.test.js","type":"ADDED","insertions":991,"deletions":0},{"file":"test/plugins/provision-limits.test.js","type":"ADDED","insertions":1167,"deletions":0}],"sizeInsertions":5125,"sizeDeletions":-2260},{"number":"2","revision":"a0c5d2ad8960c0ca2ad25fa8c97fa484f6525e56","parents":["c2c7bfe941df272297594930361bf1d1ce3ac18b"],"ref":"refs/changes/39/3639/2","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1521078732,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1521078765,"by":{"name":"Joyent Automation","username":"joyent-automation"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":10,"deletions":0},{"file":"docs/admin.md","type":"MODIFIED","insertions":332,"deletions":-406},{"file":"lib/app.js","type":"MODIFIED","insertions":283,"deletions":-417},{"file":"lib/machines.js","type":"MODIFIED","insertions":25,"deletions":-6},{"file":"lib/middleware/networks.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"lib/nics.js","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"lib/plugin-manager.js","type":"ADDED","insertions":339,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":2,"deletions":-2},{"file":"plugins/capi_limits.js","type":"DELETED","insertions":0,"deletions":-164},{"file":"plugins/filter_owner_networks.js","type":"MODIFIED","insertions":107,"deletions":-228},{"file":"plugins/free_tier.js","type":"ADDED","insertions":125,"deletions":0},{"file":"plugins/jpc_free_tier.js","type":"DELETED","insertions":0,"deletions":-162},{"file":"plugins/machine_email.js","type":"MODIFIED","insertions":126,"deletions":-88},{"file":"plugins/provision_limits.js","type":"MODIFIED","insertions":835,"deletions":-351},{"file":"test/machines.test.js","type":"MODIFIED","insertions":1,"deletions":-9},{"file":"test/plugins/filter-owner-networks.test.js","type":"ADDED","insertions":292,"deletions":0},{"file":"test/plugins/filter_owner_networks.test.js","type":"DELETED","insertions":0,"deletions":-424},{"file":"test/plugins/free-tier.test.js","type":"ADDED","insertions":276,"deletions":0},{"file":"test/plugins/machine-email.test.js","type":"ADDED","insertions":198,"deletions":0},{"file":"test/plugins/plugin-manager.test.js","type":"ADDED","insertions":991,"deletions":0},{"file":"test/plugins/provision-limits.test.js","type":"ADDED","insertions":1167,"deletions":0}],"sizeInsertions":5112,"sizeDeletions":-2260},{"number":"3","revision":"6e20ea17a930f594527159184975c8c5b82f2398","parents":["c2c7bfe941df272297594930361bf1d1ce3ac18b"],"ref":"refs/changes/39/3639/3","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1521088932,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1521088967,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521099818,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521099818,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521117198,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521117198,"by":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"}}],"comments":[{"file":"lib/plugin-manager.js","line":206,"reviewer":{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},"message":"It definitely has sense now!"}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":11,"deletions":0},{"file":"docs/admin.md","type":"MODIFIED","insertions":333,"deletions":-406},{"file":"docs/index.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":283,"deletions":-417},{"file":"lib/machines.js","type":"MODIFIED","insertions":25,"deletions":-6},{"file":"lib/middleware/networks.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"lib/nics.js","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"lib/plugin-manager.js","type":"ADDED","insertions":339,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"plugins/capi_limits.js","type":"DELETED","insertions":0,"deletions":-164},{"file":"plugins/filter_owner_networks.js","type":"MODIFIED","insertions":107,"deletions":-228},{"file":"plugins/free_tier.js","type":"ADDED","insertions":125,"deletions":0},{"file":"plugins/jpc_free_tier.js","type":"DELETED","insertions":0,"deletions":-162},{"file":"plugins/machine_email.js","type":"MODIFIED","insertions":126,"deletions":-88},{"file":"plugins/provision_limits.js","type":"MODIFIED","insertions":835,"deletions":-351},{"file":"test/machines.test.js","type":"MODIFIED","insertions":1,"deletions":-9},{"file":"test/plugins/filter-owner-networks.test.js","type":"ADDED","insertions":292,"deletions":0},{"file":"test/plugins/filter_owner_networks.test.js","type":"DELETED","insertions":0,"deletions":-424},{"file":"test/plugins/free-tier.test.js","type":"ADDED","insertions":276,"deletions":0},{"file":"test/plugins/machine-email.test.js","type":"ADDED","insertions":198,"deletions":0},{"file":"test/plugins/plugin-manager.test.js","type":"ADDED","insertions":991,"deletions":0},{"file":"test/plugins/provision-limits.test.js","type":"ADDED","insertions":1167,"deletions":0}],"sizeInsertions":5120,"sizeDeletions":-2261},{"number":"4","revision":"d3a50d9a138efb94fa219df4c1085b57b461df61","parents":["c2c7bfe941df272297594930361bf1d1ce3ac18b"],"ref":"refs/changes/39/3639/4","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1521118946,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"REWORK","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1521118980,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521133558,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521133558,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"docs/admin.md","type":"MODIFIED","insertions":456,"deletions":-427},{"file":"docs/index.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":283,"deletions":-417},{"file":"lib/machines.js","type":"MODIFIED","insertions":25,"deletions":-6},{"file":"lib/middleware/networks.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"lib/nics.js","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"lib/plugin-manager.js","type":"ADDED","insertions":339,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"plugins/capi_limits.js","type":"DELETED","insertions":0,"deletions":-164},{"file":"plugins/filter_owner_networks.js","type":"MODIFIED","insertions":107,"deletions":-228},{"file":"plugins/free_tier.js","type":"ADDED","insertions":125,"deletions":0},{"file":"plugins/jpc_free_tier.js","type":"DELETED","insertions":0,"deletions":-162},{"file":"plugins/machine_email.js","type":"MODIFIED","insertions":126,"deletions":-88},{"file":"plugins/provision_limits.js","type":"MODIFIED","insertions":835,"deletions":-351},{"file":"test/machines.test.js","type":"MODIFIED","insertions":1,"deletions":-9},{"file":"test/plugins/filter-owner-networks.test.js","type":"ADDED","insertions":292,"deletions":0},{"file":"test/plugins/filter_owner_networks.test.js","type":"DELETED","insertions":0,"deletions":-424},{"file":"test/plugins/free-tier.test.js","type":"ADDED","insertions":276,"deletions":0},{"file":"test/plugins/machine-email.test.js","type":"ADDED","insertions":198,"deletions":0},{"file":"test/plugins/plugin-manager.test.js","type":"ADDED","insertions":991,"deletions":0},{"file":"test/plugins/provision-limits.test.js","type":"ADDED","insertions":1167,"deletions":0}],"sizeInsertions":5243,"sizeDeletions":-2282},{"number":"5","revision":"03b2ec911bbac50889c03ff13f5b3c5b9eabc8d1","parents":["1c71d6f13543d56d6c184c09bb3730440be34031"],"ref":"refs/changes/39/3639/5","uploader":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"createdOn":1521143929,"author":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"},"isDraft":false,"kind":"TRIVIAL_REBASE","approvals":[{"type":"CI-Testing","description":"CI-Testing","value":"1","grantedOn":1521118980,"by":{"name":"Joyent Automation","username":"joyent-automation"}},{"type":"Code-Review","description":"Code-Review","value":"1","grantedOn":1521133558,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"Integration-Approval","description":"Integration-Approval","value":"1","grantedOn":1521133558,"by":{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"}},{"type":"SUBM","value":"1","grantedOn":1521144146,"by":{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}}],"files":[{"file":"/COMMIT_MSG","type":"ADDED","insertions":12,"deletions":0},{"file":"docs/admin.md","type":"MODIFIED","insertions":456,"deletions":-427},{"file":"docs/index.md","type":"MODIFIED","insertions":6,"deletions":0},{"file":"lib/app.js","type":"MODIFIED","insertions":283,"deletions":-417},{"file":"lib/machines.js","type":"MODIFIED","insertions":25,"deletions":-6},{"file":"lib/middleware/networks.js","type":"MODIFIED","insertions":6,"deletions":-1},{"file":"lib/nics.js","type":"MODIFIED","insertions":7,"deletions":-2},{"file":"lib/plugin-manager.js","type":"ADDED","insertions":339,"deletions":0},{"file":"package.json","type":"MODIFIED","insertions":3,"deletions":-3},{"file":"plugins/capi_limits.js","type":"DELETED","insertions":0,"deletions":-164},{"file":"plugins/filter_owner_networks.js","type":"MODIFIED","insertions":107,"deletions":-228},{"file":"plugins/free_tier.js","type":"ADDED","insertions":125,"deletions":0},{"file":"plugins/jpc_free_tier.js","type":"DELETED","insertions":0,"deletions":-162},{"file":"plugins/machine_email.js","type":"MODIFIED","insertions":126,"deletions":-88},{"file":"plugins/provision_limits.js","type":"MODIFIED","insertions":835,"deletions":-351},{"file":"test/machines.test.js","type":"MODIFIED","insertions":1,"deletions":-9},{"file":"test/plugins/filter-owner-networks.test.js","type":"ADDED","insertions":292,"deletions":0},{"file":"test/plugins/filter_owner_networks.test.js","type":"DELETED","insertions":0,"deletions":-424},{"file":"test/plugins/free-tier.test.js","type":"ADDED","insertions":276,"deletions":0},{"file":"test/plugins/machine-email.test.js","type":"ADDED","insertions":198,"deletions":0},{"file":"test/plugins/plugin-manager.test.js","type":"ADDED","insertions":991,"deletions":0},{"file":"test/plugins/provision-limits.test.js","type":"ADDED","insertions":1167,"deletions":0}],"sizeInsertions":5243,"sizeDeletions":-2282}],"allReviewers":[{"name":"Joyent Automation","username":"joyent-automation"},{"name":"Trent Mick","email":"trentm@gmail.com","username":"trentm"},{"name":"Pedro Palazón Candel","email":"pedro@joyent.com","username":"kusor"},{"name":"Marsell Kukuljevic","email":"marsell@joyent.com","username":"marsell"}]}